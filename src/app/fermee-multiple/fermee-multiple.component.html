<li class="question" cdkDrag>
  <div class="d-flex justify-content-between header-question">
    <button class="ancre" cdkDragHandle title="Déplacer la question"><mat-icon
        class="menu-icon">drag_indicator</mat-icon></button>
    <h5 class="type-question">
      <img *ngIf="isAutoGenerated" class="auto-mode-icon" title="Question générée automatiquement" src="assets/images/quaero/auto_mode.png" />
      {{'question_fermee.choix_multiple' | translate}}</h5>
    <div class="menu-question">
      <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu"
        title="Choisir une action"><mat-icon class="menu-icon">more_vert</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="display_question_fermee_multiple()"><mat-icon>remove_red_eye</mat-icon><span>{{
            'parametres.afficher' | translate }}</span></button>
        <button mat-menu-item (click)="openSideModal()"><mat-icon>transform</mat-icon><span>{{ 'parametres.branchement'
            | translate }}</span></button>
        <button mat-menu-item (click)="openGeneratorModal()"><mat-icon>auto_awesome</mat-icon><span>{{
            'parametres.generer' | translate }}</span></button>
        <button mat-menu-item (click)='collapse_question()'><mat-icon>expand</mat-icon><span>{{
            'parametres.reduire_agrandir' | translate }}</span></button>
        <button mat-menu-item (click)='remove_question(this.componentId)'><mat-icon>delete_outline</mat-icon><span>{{
            'parametres.supprimer' | translate }}</span></button>
      </mat-menu>
    </div>
  </div>
  <div>
    <textarea autosize class="form-control input-border-bottom libelle-question" placeholder="Libellé de la question"
      rows="1" [(ngModel)]="libelleQuestion" name="libelleQuestion"></textarea>
  </div>
  <div [hidden]="collapseQuestionsService.isCollapseAll" [hidden]="isCollapse">
    <div class="div-modalites" [hidden]="!dataSource.length">
      <label [hidden]="!dataSource.length" class="title-modalites">{{'question_fermee.modalites' | translate}}</label>
      <div class="table-modalites">
        <table class="table table-responsive-sm table-borderless">
          <tbody cdkDropList (cdkDropListDropped)="onDrop($event)">
            <tr cdkDrag *ngFor="let data of dataSource">
              <td cdkDragHandle class="colonne-position">{{data.position}}</td>
              <td><input class="libelle-modalite input-border-bottom" value='{{data.libelle}}'
                  placeholder="Libellé modalité" (change)="onInputChange($event, data.position)" /></td>
              <td class="colonne-actions">
                <img [ngClass]="'img-action'" id="img_supprimer" [src]="path_img_effacer" data-url=""
                  title="Supprimer la modalite" (click)="removeModalite(data.position)" />
              </td>
              <div *cdkDragPreview matchSize="true" class="container">{{data.libelle}}</div>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <button (click)="addModalite()" class="btn-addModalite"><mat-icon>add</mat-icon>
      {{'question_fermee.ajouter_modalite' | translate}}
    </button>
    <div class="d-flex justify-content-around div-parameters">
      <div>
        <label class="label-parameter">{{'question_fermee.nb_reponses_possibles' | translate}} : </label>
        <input matInput class="input-border-bottom saisie-number" type="number" min="0" max="maxReponses"
          [(ngModel)]="maxReponses" (keyup)="onKeyup($event)">
      </div>
      <div>
        <label class="label-parameter">{{'commons.reponse' | translate}} : </label>
        <mat-button-toggle-group [(ngModel)]="obligatoire" name="reponse_obligatoire" aria-label="Reponse Obligatoire">
          <mat-button-toggle value='oui'>{{'commons.reponse_obligatoire' | translate}}</mat-button-toggle>
          <mat-button-toggle value='non'>{{'commons.reponse_facultative' | translate}}</mat-button-toggle>
        </mat-button-toggle-group>
      </div>
      <div>
        <label class="label-parameter">{{'question_fermee.reponses_ordonnees' | translate}} : </label>
        <mat-button-toggle-group [(ngModel)]="ordonnee" name="reponse_ordonnee" aria-label="Reponse Ordonnee">
          <mat-button-toggle value='oui'>{{'commons.reponse_oui' | translate}}</mat-button-toggle>
          <mat-button-toggle value='non'>{{'commons.reponse_non' | translate}}</mat-button-toggle>
        </mat-button-toggle-group>
      </div>
    </div>
  </div>



  <div>
    <textarea class="text-area-branchement d-none" placeholder="Branchement" readonly></textarea>
  </div>

  <app-fermee-multiple-branchement #sideModal [titre]="libelleQuestion" [modalites]="dataSource" [questions]="questions"
    [branchementsImported]="branchements"
    (addBranchementEvent)="receiveBranchements($event)"></app-fermee-multiple-branchement>
  <app-fermee-multiple-generator #generatorModal
    (newQuestionEvent)="receiveQuestion($event)"></app-fermee-multiple-generator>
  <app-fermee-multiple-modal #editFermeeMultiple [titre]="libelleQuestion"
    [modalites]="dataSource"></app-fermee-multiple-modal>
</li>