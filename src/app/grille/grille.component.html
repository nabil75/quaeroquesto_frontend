<li class="question" cdkDrag>
  <div class="d-flex justify-content-between header-question">
    <button class="ancre" cdkDragHandle title="Déplacer la question"><mat-icon class="menu-icon">drag_indicator</mat-icon></button>
    <h5 class="type-question">
      <img *ngIf="isAutoGenerated" class="auto-mode-icon" title="Question générée automatiquement" src="assets/images/quaero/auto_mode.png" />
      {{'question_grille.grille' | translate}}</h5>
    <div class="menu-question">
      <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu" title="Choisir une action"><mat-icon
          class="menu-icon">more_vert</mat-icon></button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item
          (click)="display_question_grille()"><mat-icon>remove_red_eye</mat-icon><span>{{ 'parametres.afficher' | translate }}</span></button>
        <button mat-menu-item (click)="openSideModal()"><mat-icon>transform</mat-icon><span>{{ 'parametres.branchement' | translate }}</span></button>
        <button mat-menu-item (click)="openGeneratorModal()"><mat-icon>auto_awesome</mat-icon><span>{{ 'parametres.generer' | translate }}</span></button>
        <button mat-menu-item
          (click)='collapse_question()'><mat-icon>expand</mat-icon><span>{{ 'parametres.reduire_agrandir' | translate }}</span></button>
        <button mat-menu-item
          (click)='remove_question(this.componentId)'><mat-icon>delete_outline</mat-icon><span>{{ 'parametres.supprimer' | translate }}</span></button>
      </mat-menu>
    </div>
  </div>
  <div>
    <textarea autosize class="form-control input-border-bottom libelle-question" placeholder="Libellé de la question"
      rows="1" [(ngModel)]="libelleQuestion" name="libelleQuestion"></textarea>
  </div>
  <div [hidden]="collapseQuestionsService.isCollapseAll" [hidden]="isCollapse">
    <div class="d-flex justify-content-between">
      <div class="lignes">
        <div class="div-lignes" [hidden]="!dataSourceLignes.length">
          <label [hidden]="!dataSourceLignes.length" class="title-modalites">{{'question_grille.lignes' | translate}}</label>
          <div class="table-modalites">
            <table class="table table-responsive-sm table-borderless">
              <tbody cdkDropList (cdkDropListDropped)="onDropLigne($event)">
                <tr cdkDrag *ngFor="let data of dataSourceLignes">
                  <td cdkDragHandle class="colonne-position">{{data.position}}</td>
                  <td><input class="libelle-modalite input-border-bottom" value='{{data.libelle}}'
                      placeholder="Libellé de la ligne" (change)="onInputChangeLigne($event, data.position)" /></td>
                  <td class="colonne-actions">
                    <img [ngClass]="'img-action'" id="img_supprimer" [src]="path_img_effacer"
                      data-url="" title="Supprimer la modalite" (click)="removeLigne(data.position)" />
                  </td>
                  <div *cdkDragPreview matchSize="true" class="container">{{data.libelle}}</div>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <button (click)="addLigne()" class="btn-addModalite"><mat-icon>add</mat-icon>
          {{'question_grille.ajouter_ligne' | translate}}
        </button>

      </div>
      <div class="colonnes">
        <div [hidden]="!dataSourceColonnes.length">
          <label class="title-modalites">{{'question_grille.colonnes' | translate}}</label>
          <div class="table-modalites">
            <table class="table table-responsive-sm table-borderless">
              <tbody cdkDropList (cdkDropListDropped)="onDropColonne($event)">
                <tr cdkDrag *ngFor="let data of dataSourceColonnes">
                  <td cdkDragHandle class="colonne-position">{{data.position}}</td>
                  <td><input class="libelle-modalite input-border-bottom" value='{{data.libelle}}'
                      placeholder="Libellé de la colonne" (change)="onInputChangeColonne($event, data.position)" /></td>
                  <td class="colonne-actions">
                    <img [ngClass]="'img-action'" id="img_supprimer" [src]="path_img_effacer"
                      data-url="" title="Supprimer la modalite" (click)="removeColonne(data.position)" />
                  </td>
                  <div *cdkDragPreview matchSize="true" class="container">{{data.libelle}}</div>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <button (click)="addColonne()" class="btn-addModalite"><mat-icon>add</mat-icon>
          {{'question_grille.ajouter_colonne' | translate}}
        </button>
      </div>

    </div>
    <div class="d-flex justify-content-between div-parameters">
      <mat-button-toggle-group [(ngModel)]="obligatoire" name="reponse_obligatoire" aria-label="Reponse Obligatoire">
        <mat-button-toggle value='oui'>{{'commons.reponse_obligatoire' | translate}}</mat-button-toggle>
        <mat-button-toggle value='non'>{{'commons.reponse_facultative' | translate}}</mat-button-toggle>
      </mat-button-toggle-group>
    </div>
  </div>


  <div>
    <textarea class="branchement d-none" placeholder="Branchement" readonly></textarea>
  </div>
  <app-grille-branchement #sideModal [titre]="libelleQuestion" [lignes]="dataSourceLignes"
    [colonnes]="dataSourceColonnes" [questions]="questions" [branchementsImported]="branchements"
    (addBranchementEvent)="receiveBranchements($event)"></app-grille-branchement>
  <app-grille-modal #editGrille [titre]="libelleQuestion" [lignes]="dataSourceLignes"
    [colonnes]="dataSourceColonnes"></app-grille-modal>
  <app-grille-generator #generatorModal (newQuestionEvent)="receiveQuestion($event)"></app-grille-generator>
</li>